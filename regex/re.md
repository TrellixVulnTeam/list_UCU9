#**正则表达式**

##**动机**
1. 根据文本成为计算机主要工作之一
2. 根据文本内容进行固定搜索是文本吃力的常见工作
3. 为了快速方便的处理上述问题，正则表达式技术诞生，逐渐发展为一个单独的技术被众多语言使用

##**定义：**
即高级文本匹配模式，提供了搜索，替代等功能，本质时由一些字符和特殊符号组成的字串。这个字串描述了字符和字符的重复行为，可以匹配某一类特征的字符串集合

####目标：
1. 熟练正则表达式符号和用法
2. 能够正确的理解和简单使用正则表达式进行pipei
3. 能够使用python re模块操作正则表达式

##**正则特点：**
* 方便进行检索和修改
* 支持语言众多
* 使用灵活变化多样
* 文本处理，mongo存储一类型字串，django、tornado路由，爬虫文本匹配

##**正则的规则和用法：**

###**元字符**`（正则表达式中有特殊含义的字符）`

|匹配|元字符|规则|内容|
|---|---|---|---|
|普通字符			|	abc	|匹配相应的普通字符		|	'ab'		|
|使用 或 多个正则同时匹配	|	\|	|符号两侧的正则均能匹配	|	'ab', 'ef'	|
|匹配单一字符			|	.	|匹配任意字符'\n'除外		|	'ffo', 'fpo'	|
|匹配字符串开头		|	^	|匹配一个字符串的开头位置	|	'From'	|
|匹配字符串结尾		|	$	|匹配一个字符串的结尾位置	|	'py'		|
|匹配重复0次或多次		|	*	|匹配前面出现的正则表达式0次或者多次|	'a', 'abbb', 'a', 'ab'	|
|匹配重复一次或多次		|	+	|匹配至少出现一次		|	.+\.py$	'hello.py'	|
|匹配重复0次或一次		|  ?		|匹配前面出现的正则表达式0次或者1次	|	'ab', 'ab', 'ab'	|
|匹配重复n次			|  {N}		|匹配前面出现的正则表达式N次	|	|
|匹配重复指定次数范围		|  {M,N}	|匹配前面的正则表达式M-N次	|	('.{4,6}','hahdfaofkjda')	|
|字符集匹配			|  [abcd]	|匹配中括号中的字符集或者字符集区间的哟个字符	|	[abcd] [a-z] [A-Z] [0-9]|
|字符集不匹配			|  [^...]	|匹配出字符集中字符的任意一个字符	|	'[^_A-Za-z0-9]'	|
|匹配任意数字（非数字）字符	|  \d \D	|匹配任意一个（非）数字字符	| [0-9] [^0-9]		|
|匹配任意普通字符（特殊字符）	|  \w \W	|匹配任意一个普通（特殊）字符 | [_0-9A-Za-z] [^_0-9A-Za-z]	|
|匹配任意（非）空字符		|  \s \S	|匹配任意一个（非）空字符	| [\n\0\t\r]		|
|匹配字符串开头和结尾		|  \A ^ \Z $	|同上				|		|
|匹配（非）单词边界		|  \b	\B	|匹配一个（非）单词边界		|

```
匹配单个字符：	. \d \D \w \W \s \S [...] [^...]
匹配重复次数：	* + ? {N} {M,N}
匹配字串位置：	^ $ \A \Z \b \B
其他：		|
```


###**贪婪和非贪婪：**
和重复元字符相关
贪婪模式：在使用重复字符的时候，元字符的匹配总是尽可能多的向后匹配更多内容，即为贪婪模式
非贪婪模式：尽可能少的匹配内容，只要满足正则条件即可

####贪婪 -------->>	非贪婪
*? +? ?? {m,n}?


###**正则表达式的分组：**

使用（）为正则表达式分组

(ab)cdef:	表示给ab分了一个子组

1. 正则表达式的子组用（）表示，增加子组后对整体的匹配没有影响
2. 每个正则表达式可以由多个子组，子组由外到内由左到右为第一第二第三。。。子组
3. 子组表示一个内部整体，很多函数可以单独提取子组的值
4. 子组可以改变重复行为，将子组作为一个整体重复

`re.match('(ab)*','ababab').group()`

捕获组和非捕获组（命名组和非命名组）

格式：(?P<name>regex)

某些函数可以通过名字提取子组内容，或者通过名字进行键值对的生成
起了名字的子组可以通过名称重复使用

re.match('(?P<word>ab)cd(?P=word)','abcdabfdal').group()



练习：
匹配长度为8-10为的密码。必须以字母开头，数字字母下划线组成
^[a-zA-Z]\w{7,9}$

匹配身份证号
\d{17}(\d|x)$


##**re模块**

import re

compile(pattern,flags=0)
功能：获取正则表达式对象
参数：	pattern	正则表达式
	flags		功能标志位
返回值：返回相应的正则对象

* compile 函数返回值的属性函数，和re模块属性函数由相同的部分
相同点：功能完全相同
不同点：compile返回值对象属性函数参数中没有pattern和flags部分，因为这两个参数内容在compile生成对象时已经指明，而re模块直接调用这些函数时则需要传入
compile返回值对象属性函数参数中有pos和endpos参数，可以指明匹配目标字符串的起始位置，而re模块直接调用这些函数时没有这个功能


findall(string, pos, endpos)
功能：	使用正则表达式匹配字符串
参数：	string：	目标字符串
返回值：匹配到的内容的列表	如果正则表达式中有子组，则返回子组中的集合

split()
功能：以正则表达式切割字符串
返回值：分割后的内容放入列表中

sub(pattern, re_string, string, count=0)
功能：用目标字符串替换正则表达式匹配内容
参数：	re_string	替换字符串
	string	要匹配的字符串
	count		最多替换几处
返回值：返回替换后的字符串

subn(pattern, re_string, string, count=0)
功能：
参数：
返回值：比sub多一个实际替换数

groupindex:	compile对象属性，得到捕获组名和第几组数字组成的字典
group:	compile属性，得到一共有多少子组


finditer()
功能：同findall()
参数：同findall()
返回值：返回一个迭代器，迭代的每一项都是一个matchobj


match(pattern, string, flags=0)
功能：匹配一个字符串的开头位置
参数：目标字符串
返回值：如果匹配到返回一个macth obj
	没有匹配到返回None

search()
功能：同match，只是可以匹配任意位置，只能匹配到一处
参数：目标字符串
返回值：如果匹配到返回一个macth obj
	没有匹配到返回None

fullmatch()
要求目标字符串要能够被正则表达式完全匹配


macth对象属性及函数

属性

re		正则表达式
pos		目标字符串的开始位置
endpos	目标字符串的结束位置
lastgroup	获取最后一组的名称
lastindex	最后一组是第几组

start()	获取匹配内容在字符串中的开始位置
end()		获取匹配到内容的结束位置
span()	获取匹配到的起止位置
group(n=0)
功能：获取match对象匹配的内容
参数：	默认为0 表示获取整体匹配的内容
	>=1 表示获取某个子组的匹配内容
返回值：返回对应的字符串
groups()	获取所有子组中的内容
groupdict()	返回所有捕获组的字典


flags:
功能：辅助正则匹配的标志位
I，	IGNORECASE	忽略大小写
S,	DOTALL	匹配换行 对.元字符起作用
M,	MULTILINE	开由结束计算换行 对 ^ $ 起作用
X,	VERBOSE	让正则能以#添加注释,需要换行










